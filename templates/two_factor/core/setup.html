{% extends "_base.html" %}
{% load i18n %}
{% load crispy_forms_tags %}
{% block title %}
    {% trans "Enable Two-Factor Authentication" %}
{% endblock title %}
{% block content %}
    <div class="min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-md w-full space-y-8">
            <div class="card bg-base-100 shadow-xl">
                <div class="card-body">
                    <h2 class="text-2xl font-bold text-center">{% trans "Enable Two-Factor Authentication" %}</h2>
                    <form method="post" class="mt-8 space-y-6">
                        {% csrf_token %}
                        {{ wizard.management_form }}
                        {% if wizard.steps.current == 'method' %}
                            <p>{% trans "You can enable two-factor authentication using one of the following methods:" %}</p>
                            {{ wizard.form|crispy }}
                        {% elif wizard.steps.current == 'generator' %}
                            <p>{% trans "To start using a token generator, please use your smartphone to scan the QR code below." %}</p>
                            <img src="{{ QR_URL }}" alt="QR Code" class="mx-auto" height="200" width="200">
                            <p>{% trans "Then, enter the token generated by the app:" %}</p>
                            {{ wizard.form|crispy }}
                        {% elif wizard.steps.current == 'validation' %}
                            <p>{% trans "Please enter the token generated by your token generator:" %}</p>
                            {{ wizard.form|crispy }}
                        {% endif %}
                        <div class="flex items-center justify-between">
                            {% if wizard.steps.prev %}
                                <button name="wizard_goto_step"
                                        type="submit"
                                        value="{{ wizard.steps.prev }}"
                                        class="btn btn-secondary">{% trans "Back" %}</button>
                            {% endif %}
                            <button type="submit" class="btn btn-primary">{% trans "Next" %}</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}
